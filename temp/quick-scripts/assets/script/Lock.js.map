{"version":3,"sources":["Lock.js"],"names":["JoystickInfo","require","tempAngle1","Ani","cc","Class","extends","Component","properties","joystickInfo","default","type","displayName","ani","unlockAudio","url","AudioClip","onLoad","director","getCollisionManager","enabled","enabledDebugDraw","enabledDrawBoundingBox","touchingNumber","onCollisionEnter","other","myAnimation","getComponent","Animation","_keyflag","publicAngle","flagy","play","audioEngine","setTimeout","node","destroy","onCollisionStay","onCollisionExit","flagx","start"],"mappings":";;;;;;AAAA,IAAIA,eAAeC,QAAQ,aAAR,CAAnB;AACA,IAAIC,UAAJ;AACA,IAAIC,MAAMF,QAAQ,mBAAR,CAAV;AACAG,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,sBAAc;;AAEVC,qBAAS,IAFC;AAGVC,kBAAMX,YAHI;AAIVY,yBAAa;AAJH,SADN;;AAQRC,aAAK;;AAEDH,qBAAS,IAFR;AAGDC,kBAAMR,GAHL;AAIDS,yBAAa;AAJZ,SARG;;AAeRE,qBACA;AACIJ,qBAAQ,IADZ;AAEIK,iBAAIX,GAAGY;AAFX;;AAhBQ,KAHP;;AA0BL;;AAEAC,YAAQ,kBAAY;AAChBb,WAAGc,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA4C,IAA5C;AACAhB,WAAGc,QAAH,CAAYC,mBAAZ,GAAkCE,gBAAlC,GAAqD,KAArD;AACAjB,WAAGc,QAAH,CAAYC,mBAAZ,GAAkCG,sBAAlC,GAA2D,KAA3D;AACA,aAAKC,cAAL,GAAsB,CAAtB;AACH,KAjCI;;AAmCLC,sBAAkB,0BAAUC,KAAV,EAAiB;AAAA;;AAC/B,YAAIC,cAAc,KAAKC,YAAL,CAAkBvB,GAAGwB,SAArB,CAAlB;AACA,YAAI,KAAKf,GAAL,CAASgB,QAAT,IAAqB,CAAzB,EAA4B;AACxB,gBACK,KAAKpB,YAAL,CAAkBqB,WAAlB,IAAiC,CAAjC,IAAsC,KAAKrB,YAAL,CAAkBqB,WAAlB,IAAiC,GAD5E,EAGA;AACI,qBAAKrB,YAAL,CAAkBsB,KAAlB,GAA0B,CAA1B,CADJ,CACgC;AAC/B;AACJ,SAPD,MAQK,IAAI,KAAKlB,GAAL,CAASgB,QAAT,IAAqB,CAAzB,EACL;AACIH,wBAAYM,IAAZ,CAAiB,QAAjB;AACA5B,eAAG6B,WAAH,CAAeD,IAAf,CAAoB,KAAKlB,WAAzB,EAAqC,KAArC;AACAoB,uBAAW,YAAM;AACb,sBAAKC,IAAL,CAAUC,OAAV;AACH,aAFD,EAEG,IAFH;AAIH;AACJ,KAtDI;;AAwDLC,qBAAiB,yBAAUZ,KAAV,EAAiB;AAC9B,YAAI,KAAKhB,YAAL,CAAkBqB,WAAlB,IAAiC,CAAjC,IAAsC,KAAKrB,YAAL,CAAkBqB,WAAlB,IAAiC,CAAC,GAA5E,EAAiF,KAAKrB,YAAL,CAAkBsB,KAAlB,GAA0B,CAA1B;AAEpF,KA3DI;;AA6DLO,qBAAiB,2BAAY;AACzB,aAAKf,cAAL;AACA,aAAKd,YAAL,CAAkB8B,KAAlB,GAA0B,CAA1B;AACA,aAAK9B,YAAL,CAAkBsB,KAAlB,GAA0B,CAA1B;AACH,KAjEI;;AAmELS,SAnEK,mBAmEG,CAEP;AArEI;;AAuEL;AAvEJ","file":"Lock.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["var JoystickInfo = require('JoystickBG1');\r\nvar tempAngle1;\r\nvar Ani = require('animationNotFirst');\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        joystickInfo: {\r\n\r\n            default: null,\r\n            type: JoystickInfo,\r\n            displayName: 'move from',\r\n        },\r\n\r\n        ani: {\r\n\r\n            default: null,\r\n            type: Ani,\r\n            displayName: 'hero node',\r\n        },\r\n\r\n        unlockAudio:\r\n        {\r\n            default:null,\r\n            url:cc.AudioClip,\r\n        }\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n        cc.director.getCollisionManager().enabled = true;\r\n        cc.director.getCollisionManager().enabledDebugDraw = false;\r\n        cc.director.getCollisionManager().enabledDrawBoundingBox = false;\r\n        this.touchingNumber = 0;\r\n    },\r\n\r\n    onCollisionEnter: function (other) {\r\n        var myAnimation = this.getComponent(cc.Animation);\r\n        if (this.ani._keyflag == 0) {\r\n            if (\r\n                (this.joystickInfo.publicAngle >= 0 && this.joystickInfo.publicAngle <= 180)\r\n            ) \r\n            {\r\n                this.joystickInfo.flagy = 0;//left\r\n            }\r\n        }\r\n        else if (this.ani._keyflag == 1) \r\n        {\r\n            myAnimation.play('Unlock');\r\n            cc.audioEngine.play(this.unlockAudio,false);\r\n            setTimeout(() => {\r\n                this.node.destroy();\r\n            }, 1000);\r\n            \r\n        }\r\n    },\r\n\r\n    onCollisionStay: function (other) {\r\n        if (this.joystickInfo.publicAngle <= 0 && this.joystickInfo.publicAngle >= -180) this.joystickInfo.flagy = 1;\r\n\r\n    },\r\n\r\n    onCollisionExit: function () {\r\n        this.touchingNumber--;\r\n        this.joystickInfo.flagx = 1;\r\n        this.joystickInfo.flagy = 1;\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});"]}