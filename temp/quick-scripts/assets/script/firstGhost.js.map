{"version":3,"sources":["firstGhost.js"],"names":["JoystickBG","require","Character1","time1","Date","valueOf","time2","tempAngle1","tempAngle2","characterWorldPos","ghostWorldPos","angleAboutGhostAndCharacter","distanceBetweenGhostAndCharacter","chaseModeOff","cc","Class","extends","Component","properties","_faceAngle","default","displayName","characterToCal","type","Node","dieAudio","url","AudioClip","ghostFindYou","_ifAudioPlayed","speedGhost","speedUpGhost","ifGhostMove","_ifDead","onLoad","director","getCollisionManager","enabled","enabledDebugDraw","enabledDrawBoundingBox","touchingNumber","myAnimation","getComponent","Animation","play","Math","random","onCollisionEnter","other","onCollisionStay","console","log","onCollisionExit","node","color","Color","WHITE","start","_allDirectionsMove","x","cos","PI","y","sin","_allDirectionsChasing","update","dt","characterAnimation","characterOneScript","convertToWorldSpaceAR","getPosition","atan2","sqrt","ifDead","audioEngine","setTimeout","loadScene"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,aAAaC,QAAQ,aAAR,CAAjB;AACA,IAAIC,aAAaD,QAAQ,WAAR,CAAjB;;AAGA,IAAIE,QAAS,IAAIC,IAAJ,EAAD,CAAaC,OAAb,EAAZ;AACA,IAAIC,QAAQH,KAAZ;AACA,IAAII,UAAJ;AACA,IAAIC,UAAJ;;AAEA;;;AAKA,IAAIC,iBAAJ;AACA,IAAIC,aAAJ;AACA,IAAIC,2BAAJ;AACA,IAAIC,gCAAJ;AACA,IAAIC,eAAe,CAAnB;AACA;;;AAGAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAY;AACRC,qBAAS,IADD;AAERC,yBAAa;AAFL,SADJ;;AAMR;AACA;AACA;AACA;AACA;AACA;AACAC,wBAAgB;AACZF,qBAAS,IADG;AAEZG,kBAAMT,GAAGU,IAFG;AAGZH,yBAAa,IAHD,CAGM;;AAHN,SAZR;AAkBRI,kBACA;AACIL,qBAAQ,IADZ;AAEIM,iBAAIZ,GAAGa;AAFX,SAnBQ;AAuBRC,sBACA;AACIR,qBAAQ,IADZ;AAEIM,iBAAIZ,GAAGa;AAFX,SAxBQ;AA4BRE,wBAAgB,CA5BR;AA6BRC,oBAAY,CA7BJ,EA6BgB;AACxBC,sBAAc,CA9BN;AA+BRC,qBAAa,CA/BL;AAgCRC,iBAAS;AAhCD,KAHP;;AAwCL;;AAEAC,YAAQ,kBAAY;AAChB,aAAKF,WAAL,GAAmB,CAAnB;AACA,aAAKC,OAAL,GAAe,CAAf;;AAEAnB,WAAGqB,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA4C,IAA5C;AACAvB,WAAGqB,QAAH,CAAYC,mBAAZ,GAAkCE,gBAAlC,GAAqD,KAArD;AACAxB,WAAGqB,QAAH,CAAYC,mBAAZ,GAAkCG,sBAAlC,GAA2D,KAA3D;AACA,aAAKC,cAAL,GAAsB,CAAtB;;AAEA,YAAIC,cAAc,KAAKC,YAAL,CAAkB5B,GAAG6B,SAArB,CAAlB;;AAEAF,oBAAYG,IAAZ,CAAiB,YAAjB;AACAzC,gBAAS,IAAIC,IAAJ,EAAD,CAAaC,OAAb,EAAR;AACAC,gBAAQH,KAAR;AACA,aAAKgB,UAAL,GAAmB0B,KAAKC,MAAL,KAAgB,GAAjB,GAAwB,GAA1C;AACAvC,qBAAa,KAAKY,UAAlB;AACAX,qBAAa,KAAKW,UAAlB;AACA,YAAIZ,cAAc,CAAC,EAAf,IAAqBA,cAAc,CAAC,GAAxC,EAA6C;AACzCA,yBAAa,CAAb;AACH,SAFD,MAGK;AACDA,yBAAa,CAAb;AACH;AACDC,qBAAaD,UAAb;AACH,KAlEI;;AAoELwC,sBAAkB,0BAAUC,KAAV,EAAiB;AAC/B,aAAKR,cAAL;;AAEA,YAAIC,cAAc,KAAKC,YAAL,CAAkB5B,GAAG6B,SAArB,CAAlB;AACA,aAAKX,WAAL,GAAmB,CAAnB;AACA1B,gBAAQH,KAAR;AACAsC,oBAAYG,IAAZ,CAAiB,iBAAjB;AAEH,KA5EI;;AA8ELK,qBAAiB,yBAAUD,KAAV,EAAiB;AAC9BE,gBAAQC,GAAR,CAAY,mBAAZ;AACH,KAhFI;;AAkFLC,qBAAiB,2BAAY;AACzB,aAAKZ,cAAL;;AAEA,YAAI,KAAKA,cAAL,KAAwB,CAA5B,EAA+B;AAC3B,iBAAKa,IAAL,CAAUC,KAAV,GAAkBxC,GAAGyC,KAAH,CAASC,KAA3B;AACH;AACD,YAAIf,cAAc,KAAKC,YAAL,CAAkB5B,GAAG6B,SAArB,CAAlB;AACAF,oBAAYG,IAAZ,CAAiB,YAAjB;AACA,aAAKZ,WAAL,GAAmB,CAAnB;AACH,KA3FI;;AA6FLyB,SA7FK,mBA6FG,CAEP,CA/FI;;AAgGL;AACAC,wBAAoB,8BAAY;AAC5B,YAAI,KAAK1B,WAAT,EAAsB;AAClB,iBAAKqB,IAAL,CAAUM,CAAV,IAAed,KAAKe,GAAL,CAAS,KAAKzC,UAAL,IAAmB0B,KAAKgB,EAAL,GAAU,GAA7B,CAAT,IAA8C,KAAK/B,UAAlE;AACA,iBAAKuB,IAAL,CAAUS,CAAV,IAAejB,KAAKkB,GAAL,CAAS,KAAK5C,UAAL,IAAmB0B,KAAKgB,EAAL,GAAU,GAA7B,CAAT,IAA8C,KAAK/B,UAAlE;AACH;AACJ,KAtGI;;AAwGLkC,2BAAuB,iCAAY;AAC/B,YAAI,KAAKhC,WAAT,EAAsB;AAClB,iBAAKqB,IAAL,CAAUM,CAAV,IAAed,KAAKe,GAAL,CAAS,KAAKzC,UAAL,IAAmB0B,KAAKgB,EAAL,GAAU,GAA7B,CAAT,IAA8C,KAAK9B,YAAlE;AACA,iBAAKsB,IAAL,CAAUS,CAAV,IAAejB,KAAKkB,GAAL,CAAS,KAAK5C,UAAL,IAAmB0B,KAAKgB,EAAL,GAAU,GAA7B,CAAT,IAA8C,KAAK9B,YAAlE;AACH;AACJ,KA7GI;;AAiHLkC,YAAQ,gBAAUC,EAAV,EAAc;AAClB,YAAIC,qBAAqB,KAAK7C,cAAL,CAAoBoB,YAApB,CAAiC5B,GAAG6B,SAApC,CAAzB;AACA,YAAIyB,qBAAqB,KAAK9C,cAAL,CAAoBoB,YAApB,CAAiCxC,UAAjC,CAAzB;AACAY,WAAGqC,GAAH,CAAO,KAAKnB,WAAZ;;AAEAvB,4BAAoB,KAAKa,cAAL,CAAoB+C,qBAApB,CAA0C,KAAK/C,cAAL,CAAoBgD,WAApB,EAA1C,CAApB;AACA5D,wBAAgB,KAAK2C,IAAL,CAAUgB,qBAAV,CAAgC,KAAK/C,cAAL,CAAoBgD,WAApB,EAAhC,CAAhB;AACA3D,sCAA8BkC,KAAK0B,KAAL,CAAW7D,cAAcoD,CAAd,GAAkBrD,kBAAkBqD,CAA/C,EAAkDpD,cAAciD,CAAd,GAAkBlD,kBAAkBkD,CAAtF,KAA4F,MAAMd,KAAKgB,EAAvG,CAA9B;AACAjD,2CACIiC,KAAK2B,IAAL,CAAU,CAAC9D,cAAciD,CAAd,GAAkBlD,kBAAkBkD,CAArC,KAA2CjD,cAAciD,CAAd,GAAkBlD,kBAAkBkD,CAA/E,IACJ,CAACjD,cAAcoD,CAAd,GAAkBrD,kBAAkBqD,CAArC,KAA2CpD,cAAcoD,CAAd,GAAkBrD,kBAAkBqD,CAA/E,CADN,CADJ;;AAIQ,YAAIlD,mCAAmC,EAAnC,IAAyC,KAAKqB,OAAL,IAAgB,CAA7D,EACA;AACIkC,+BAAmBvB,IAAnB,CAAwB,WAAxB;AACAwB,+BAAmBK,MAAnB,GAA4B,CAA5B;AACA,iBAAKxC,OAAL,GAAe,CAAf;AACAnB,eAAG4D,WAAH,CAAe9B,IAAf,CAAoB,KAAKnB,QAAzB,EAAkC,KAAlC;;AAEAkD,uBAAW,YAAM;AACb7D,mBAAGqB,QAAH,CAAYyC,SAAZ,CAAsB,UAAtB;AACH,aAFD,EAEG,IAFH;AAGH;;AAET,YAAIhE,oCAAoC,GAAxC,EAA6C;AACzCC,2BAAe,CAAf;AACA,gBAAI,KAAKgB,cAAL,IAAuB,CAA3B,EACA;AACIf,mBAAG4D,WAAH,CAAe9B,IAAf,CAAoB,KAAKhB,YAAzB,EAAsC,KAAtC;AACA,qBAAKC,cAAL,GAAsB,CAAtB;AACH;AAEJ,SARD,MAUA;AACIhB,2BAAe,CAAf;AACA,iBAAKgB,cAAL,GAAsB,CAAtB;AACH;;AAED,YAAI,KAAKG,WAAT,EAAsB;AAClB7B,oBAAS,IAAIC,IAAJ,EAAD,CAAaC,OAAb,EAAR;;AAEA,gBAAIQ,YAAJ,EACA;AACI,oBAAIV,QAAQG,KAAR,IAAiB,IAArB,EAA2B;AACvB,yBAAKa,UAAL,GAAkB0B,KAAKC,MAAL,KAAgB,GAAhB,GAAsB,GAAxC;AACAxC,4BAAQH,KAAR;AACH;;AAED,qBAAKuD,kBAAL;AACA;;AAEA,oBAAIjB,cAAc,KAAKC,YAAL,CAAkB5B,GAAG6B,SAArB,CAAlB;AACA;;AAEA,oBAAI,KAAKxB,UAAL,IAAmB,CAAC,EAApB,IAA0B,KAAKA,UAAL,IAAmB,CAAC,GAAlD,EAAuD;AACnDZ,iCAAa,CAAb,CADmD,CACpC;AAClB,iBAFD,MAGK,IACA,KAAKY,UAAL,IAAmB,CAAC,GAApB,IAA2B,KAAKA,UAAL,IAAmB,CAAC,GAAhD,IACI,KAAKA,UAAL,IAAmB,GAAnB,IAA0B,KAAKA,UAAL,IAAmB,GAFhD,EAGH;AACEZ,iCAAa,CAAb,CADF,CACiB;AAClB,iBALI,MAMA,IAAI,KAAKY,UAAL,IAAmB,GAAnB,IAA0B,KAAKA,UAAL,IAAmB,EAAjD,EAAqD;AACtDZ,iCAAa,CAAb,CADsD,CACvC;AAClB,iBAFI,MAGA,IACA,KAAKY,UAAL,IAAmB,CAAnB,IAAwB,KAAKA,UAAL,IAAmB,EAA5C,IACI,KAAKA,UAAL,IAAmB,CAAnB,IAAwB,KAAKA,UAAL,IAAmB,CAAC,EAF/C,EAGH;AACEZ,iCAAa,CAAb,CADF,CACiB;AAClB;;AAGD,oBAAIA,eAAeC,UAAnB,EAA+B;;AAE3B;AACH,iBAHD,MAIK;AACD,4BAAQD,UAAR;AACI,6BAAK,CAAL;AACIkC,wCAAYG,IAAZ,CAAiB,WAAjB;AACApC,yCAAaD,UAAb;AACA;AACA;AACJ,6BAAK,CAAL;AACIkC,wCAAYG,IAAZ,CAAiB,YAAjB;AACApC,yCAAaD,UAAb;AACA;AACA;AACJ,6BAAK,CAAL;AACIkC,wCAAYG,IAAZ,CAAiB,YAAjB;AACApC,yCAAaD,UAAb;AACA;AACA;AACJ,6BAAK,CAAL;AACIkC,wCAAYG,IAAZ,CAAiB,WAAjB;AACApC,yCAAaD,UAAb;AACA;AACA;AACJ;AACI;AAtBR;AAwBH;AAEJ,aAhED,MAkEA;AACI;AACA,qBAAKY,UAAL,GAAkBR,2BAAlB;AACA,qBAAKqD,qBAAL;;AAEA,oBAAIvB,cAAc,KAAKC,YAAL,CAAkB5B,GAAG6B,SAArB,CAAlB;AACA;;AAEA,oBAAI,KAAKxB,UAAL,IAAmB,CAAC,EAApB,IAA0B,KAAKA,UAAL,IAAmB,CAAC,GAAlD,EAAuD;AACnDZ,iCAAa,CAAb,CADmD,CACpC;AAClB,iBAFD,MAGK,IACA,KAAKY,UAAL,IAAmB,CAAC,GAApB,IAA2B,KAAKA,UAAL,IAAmB,CAAC,GAAhD,IACI,KAAKA,UAAL,IAAmB,GAAnB,IAA0B,KAAKA,UAAL,IAAmB,GAFhD,EAGH;AACEZ,iCAAa,CAAb,CADF,CACiB;AAClB,iBALI,MAMA,IAAI,KAAKY,UAAL,IAAmB,GAAnB,IAA0B,KAAKA,UAAL,IAAmB,EAAjD,EAAqD;AACtDZ,iCAAa,CAAb,CADsD,CACvC;AAClB,iBAFI,MAGA,IACA,KAAKY,UAAL,IAAmB,CAAnB,IAAwB,KAAKA,UAAL,IAAmB,EAA5C,IACI,KAAKA,UAAL,IAAmB,CAAnB,IAAwB,KAAKA,UAAL,IAAmB,CAAC,EAF/C,EAGH;AACEZ,iCAAa,CAAb,CADF,CACiB;AAClB;;AAGD,oBAAIA,eAAeC,UAAnB,EAA+B;;AAE3B;AACH,iBAHD,MAIK;AACD,4BAAQD,UAAR;AACI,6BAAK,CAAL;AACIkC,wCAAYG,IAAZ,CAAiB,WAAjB;AACApC,yCAAaD,UAAb;AACA;AACA;AACJ,6BAAK,CAAL;AACIkC,wCAAYG,IAAZ,CAAiB,YAAjB;AACApC,yCAAaD,UAAb;AACA;AACA;AACJ,6BAAK,CAAL;AACIkC,wCAAYG,IAAZ,CAAiB,YAAjB;AACApC,yCAAaD,UAAb;AACA;AACA;AACJ,6BAAK,CAAL;AACIkC,wCAAYG,IAAZ,CAAiB,WAAjB;AACApC,yCAAaD,UAAb;AACA;AACA;AACJ;AACI;AAtBR;AAwBH;AAEJ;AACJ,SAjID,MAkIK;AACD;AACH;AAEJ;AA9RI,CAAT","file":"firstGhost.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar JoystickBG = require('JoystickBG1');\r\nvar Character1 = require('animation');\r\n\r\n\r\nvar time1 = (new Date()).valueOf();\r\nvar time2 = time1;\r\nvar tempAngle1;\r\nvar tempAngle2;\r\n\r\n//about the ghost node\r\n\r\n\r\n\r\n\r\nvar characterWorldPos;\r\nvar ghostWorldPos;\r\nvar angleAboutGhostAndCharacter;\r\nvar distanceBetweenGhostAndCharacter;\r\nvar chaseModeOff = 1;\r\n//about running after\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _faceAngle: {\r\n            default: null,\r\n            displayName: '当前面朝方向角度',\r\n        },\r\n       \r\n        // scriptOfJoystickOne: {\r\n        //     default: null,\r\n        //     type: JoystickBG,\r\n        //     displayName: '摇杆1维持相对位置',\r\n        // },\r\n        //当幽灵挂载在背景下时不需要这个节点\r\n        characterToCal: {\r\n            default: null,\r\n            type: cc.Node,\r\n            displayName: '主角',//use to calculate the distance\r\n\r\n        },\r\n        dieAudio:\r\n        {\r\n            default:null,\r\n            url:cc.AudioClip,\r\n        },\r\n        ghostFindYou:\r\n        {\r\n            default:null,\r\n            url:cc.AudioClip,\r\n        },\r\n        _ifAudioPlayed: 0,\r\n        speedGhost: 1,          //速度\r\n        speedUpGhost: 4,\r\n        ifGhostMove: 0,\r\n        _ifDead: 0,\r\n    },\r\n\r\n\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n        this.ifGhostMove = 0;\r\n        this._ifDead = 0;\r\n\r\n        cc.director.getCollisionManager().enabled = true;\r\n        cc.director.getCollisionManager().enabledDebugDraw = false;\r\n        cc.director.getCollisionManager().enabledDrawBoundingBox = false;\r\n        this.touchingNumber = 0;\r\n\r\n        var myAnimation = this.getComponent(cc.Animation);\r\n       \r\n        myAnimation.play('GhostFront');\r\n        time1 = (new Date()).valueOf();\r\n        time2 = time1;\r\n        this._faceAngle = (Math.random() * 360) - 180;\r\n        tempAngle1 = this._faceAngle;\r\n        tempAngle2 = this._faceAngle;\r\n        if (tempAngle1 <= -45 && tempAngle1 >= -135) {\r\n            tempAngle1 = 1;\r\n        }\r\n        else {\r\n            tempAngle1 = 0;\r\n        }\r\n        tempAngle2 = tempAngle1;\r\n    },\r\n\r\n    onCollisionEnter: function (other) {\r\n        this.touchingNumber++;\r\n\r\n        var myAnimation = this.getComponent(cc.Animation);\r\n        this.ifGhostMove = 0;\r\n        time2 = time1;\r\n        myAnimation.play('Dizzyghostfront');\r\n\r\n    },\r\n\r\n    onCollisionStay: function (other) {\r\n        console.log('on collision stay');\r\n    },\r\n\r\n    onCollisionExit: function () {\r\n        this.touchingNumber--;\r\n\r\n        if (this.touchingNumber === 0) {\r\n            this.node.color = cc.Color.WHITE;\r\n        }\r\n        var myAnimation = this.getComponent(cc.Animation);\r\n        myAnimation.play('GhostFront');\r\n        this.ifGhostMove = 1;\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n    //全方向移动\r\n    _allDirectionsMove: function () {\r\n        if (this.ifGhostMove) {\r\n            this.node.x -= Math.cos(this._faceAngle * (Math.PI / 180)) * this.speedGhost;\r\n            this.node.y -= Math.sin(this._faceAngle * (Math.PI / 180)) * this.speedGhost;\r\n        }\r\n    },\r\n\r\n    _allDirectionsChasing: function () {\r\n        if (this.ifGhostMove) {\r\n            this.node.x -= Math.cos(this._faceAngle * (Math.PI / 180)) * this.speedUpGhost;\r\n            this.node.y -= Math.sin(this._faceAngle * (Math.PI / 180)) * this.speedUpGhost;\r\n        }\r\n    },\r\n    \r\n\r\n    \r\n    update: function (dt) {\r\n        var characterAnimation = this.characterToCal.getComponent(cc.Animation);\r\n        var characterOneScript = this.characterToCal.getComponent(Character1);\r\n        cc.log(this.ifGhostMove);\r\n\r\n        characterWorldPos = this.characterToCal.convertToWorldSpaceAR(this.characterToCal.getPosition());\r\n        ghostWorldPos = this.node.convertToWorldSpaceAR(this.characterToCal.getPosition());\r\n        angleAboutGhostAndCharacter = Math.atan2(ghostWorldPos.y - characterWorldPos.y, ghostWorldPos.x - characterWorldPos.x) * (180 / Math.PI);\r\n        distanceBetweenGhostAndCharacter =\r\n            Math.sqrt((ghostWorldPos.x - characterWorldPos.x) * (ghostWorldPos.x - characterWorldPos.x)\r\n                + (ghostWorldPos.y - characterWorldPos.y) * (ghostWorldPos.y - characterWorldPos.y));\r\n        \r\n                if (distanceBetweenGhostAndCharacter < 40 && this._ifDead == 0) \r\n                {\r\n                    characterAnimation.play('TestDeath');\r\n                    characterOneScript.ifDead = 1;\r\n                    this._ifDead = 1;\r\n                    cc.audioEngine.play(this.dieAudio,false);\r\n                    \r\n                    setTimeout(() => {\r\n                        cc.director.loadScene('GameLose');\r\n                    }, 1500); \r\n                }\r\n          \r\n        if (distanceBetweenGhostAndCharacter <= 400) {\r\n            chaseModeOff = 0;\r\n            if (this._ifAudioPlayed == 0)\r\n            {\r\n                cc.audioEngine.play(this.ghostFindYou,false);\r\n                this._ifAudioPlayed = 1;\r\n            }\r\n            \r\n        }\r\n        else\r\n        {\r\n            chaseModeOff = 1;\r\n            this._ifAudioPlayed = 0;\r\n        }\r\n\r\n        if (this.ifGhostMove) {\r\n            time1 = (new Date()).valueOf();\r\n\r\n            if (chaseModeOff)\r\n            {\r\n                if (time1 - time2 >= 1000) {\r\n                    this._faceAngle = Math.random() * 360 - 180;\r\n                    time2 = time1;\r\n                }\r\n              \r\n                this._allDirectionsMove();\r\n                //random wandering code above\r\n    \r\n                var myAnimation = this.getComponent(cc.Animation);\r\n                //animation code\r\n    \r\n                if (this._faceAngle <= -45 && this._faceAngle >= -135) {\r\n                    tempAngle1 = 1;//back\r\n                }\r\n                else if (\r\n                    (this._faceAngle <= -135 && this._faceAngle >= -180)\r\n                    || (this._faceAngle <= 180 && this._faceAngle >= 135)\r\n                ) {\r\n                    tempAngle1 = 2;//right\r\n                }\r\n                else if (this._faceAngle <= 135 && this._faceAngle >= 45) {\r\n                    tempAngle1 = 3;//front\r\n                }\r\n                else if (\r\n                    (this._faceAngle >= 0 && this._faceAngle <= 45)\r\n                    || (this._faceAngle <= 0 && this._faceAngle >= -45)\r\n                ) {\r\n                    tempAngle1 = 4;//left\r\n                }\r\n    \r\n    \r\n                if (tempAngle1 === tempAngle2) {\r\n    \r\n                    // console.log('No turn and ok');//use to debug\r\n                }\r\n                else {\r\n                    switch (tempAngle1) {\r\n                        case 1:\r\n                            myAnimation.play('GhostBack');\r\n                            tempAngle2 = tempAngle1;\r\n                            // console.log(\"ghostTurnBackOK\");\r\n                            break;\r\n                        case 2:\r\n                            myAnimation.play('GhostRight');\r\n                            tempAngle2 = tempAngle1;\r\n                            //console.log(\"ghostTurnRightOK\");\r\n                            break;\r\n                        case 3:\r\n                            myAnimation.play('GhostFront');\r\n                            tempAngle2 = tempAngle1;\r\n                            // console.log(\"GhostTurnFrontOK\");\r\n                            break;\r\n                        case 4:\r\n                            myAnimation.play('GhostLeft');\r\n                            tempAngle2 = tempAngle1;\r\n                            //  console.log(\"ghostTurnLeftOK\");\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                }\r\n            \r\n            }\r\n            else\r\n            {\r\n                //chasing code\r\n                this._faceAngle = angleAboutGhostAndCharacter;\r\n                this._allDirectionsChasing();\r\n    \r\n                var myAnimation = this.getComponent(cc.Animation);\r\n                //animation code\r\n    \r\n                if (this._faceAngle <= -45 && this._faceAngle >= -135) {\r\n                    tempAngle1 = 1;//back\r\n                }\r\n                else if (\r\n                    (this._faceAngle <= -135 && this._faceAngle >= -180)\r\n                    || (this._faceAngle <= 180 && this._faceAngle >= 135)\r\n                ) {\r\n                    tempAngle1 = 2;//right\r\n                }\r\n                else if (this._faceAngle <= 135 && this._faceAngle >= 45) {\r\n                    tempAngle1 = 3;//front\r\n                }\r\n                else if (\r\n                    (this._faceAngle >= 0 && this._faceAngle <= 45)\r\n                    || (this._faceAngle <= 0 && this._faceAngle >= -45)\r\n                ) {\r\n                    tempAngle1 = 4;//left\r\n                }\r\n    \r\n    \r\n                if (tempAngle1 === tempAngle2) {\r\n    \r\n                    // console.log('No turn and ok');//use to debug\r\n                }\r\n                else {\r\n                    switch (tempAngle1) {\r\n                        case 1:\r\n                            myAnimation.play('GhostBack');\r\n                            tempAngle2 = tempAngle1;\r\n                            // console.log(\"ghostTurnBackOK\");\r\n                            break;\r\n                        case 2:\r\n                            myAnimation.play('GhostRight');\r\n                            tempAngle2 = tempAngle1;\r\n                            //console.log(\"ghostTurnRightOK\");\r\n                            break;\r\n                        case 3:\r\n                            myAnimation.play('GhostFront');\r\n                            tempAngle2 = tempAngle1;\r\n                            // console.log(\"GhostTurnFrontOK\");\r\n                            break;\r\n                        case 4:\r\n                            myAnimation.play('GhostLeft');\r\n                            tempAngle2 = tempAngle1;\r\n                            //  console.log(\"ghostTurnLeftOK\");\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                }\r\n            \r\n            }\r\n        }\r\n        else {\r\n            ;\r\n        }\r\n\r\n    },\r\n});\r\n"]}