{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\background2.js"],"names":["JoystickInfo","require","tempAngle1","operatetype","cc","Class","extends","Component","properties","speed","joystickInfo","default","type","displayName","onLoad","director","getCollisionManager","enabled","enabledDebugDraw","enabledDrawBoundingBox","left","right","up","down","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","touchingNumber","publicAngle","onCollisionEnter","other","flagy","flagx","onCollisionStay","onCollisionExit","start","update","dt","node","x","y","event","keyCode","macro","KEY","a","d","s","w"],"mappings":"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","file":"background2.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar JoystickInfo = require('JoystickBG1');\r\nvar tempAngle1;\r\nvar operatetype;\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        speed: 200,\r\n        joystickInfo: {\r\n\r\n            default: null,\r\n            type: JoystickInfo,\r\n            displayName: 'move from',\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n        cc.director.getCollisionManager().enabled = true;\r\n        cc.director.getCollisionManager().enabledDebugDraw = false;\r\n        cc.director.getCollisionManager().enabledDrawBoundingBox = false;\r\n        this.left = false;\r\n        this.right = false;\r\n        this.up = false;\r\n        this.down = false;\r\n        //注册按钮事件\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        this.touchingNumber = 0;\r\n        tempAngle1 = this.joystickInfo.publicAngle;\r\n\r\n    },\r\n\r\n    onCollisionEnter: function (other) {\r\n        //var world = self.world;\r\n        // ��ײ����� aabb ��ײ��\r\n        //var aabb = world.aabb;\r\n\r\n        // ��һ�μ������ײ����� aabb ��ײ��\r\n        //var preAabb = world.preAabb;\r\n        //var r = world.radius;\r\n        //var point = cc.p(preAabb.x, preAabb.y)\r\n        //cc.log(aabb.x ,aabb.y,preAabb.x,preAabb.y)\r\n        //var offsetX = aabb.x - preAabb.x\r\n        //var offsetY = aabb.y - preAabb.y\r\n        //console.log('y='+offsetY);\r\n        //console.log('y='+offsetX);\r\n        this.touchingNumber++;\r\n        if (this.joystickInfo.publicAngle <= -45 && this.joystickInfo.publicAngle >= -135) {\r\n            this.joystickInfo.flagy = 0;//back\r\n            operatetype = 1;\r\n        }\r\n        else if (\r\n            (this.joystickInfo.publicAngle <= -135 && this.joystickInfo.publicAngle >= -180)\r\n            || (this.joystickInfo.publicAngle <= 180 && this.joystickInfo.publicAngle >= 135)\r\n        ) {\r\n            this.joystickInfo.flagx = 0;//right\r\n            operatetype = 2;\r\n        }\r\n        else if (this.joystickInfo.publicAngle <= 135 && this.joystickInfo.publicAngle >= 45) {\r\n            this.joystickInfo.flagy = 0;//front\r\n            operatetype = 3;\r\n        }\r\n        else if (\r\n            (this.joystickInfo.publicAngle >= 0 && this.joystickInfo.publicAngle <= 45)\r\n            || (this.joystickInfo.publicAngle <= 0 && this.joystickInfo.publicAngle >= -45)\r\n        ) {\r\n            this.joystickInfo.flagx = 0;//left\r\n            operatetype = 4;\r\n        }\r\n\r\n    },\r\n\r\n    onCollisionStay: function (other) {\r\n        if (operatetype == 1) {\r\n            if (this.joystickInfo.publicAngle <= 135 && this.joystickInfo.publicAngle >= 45) this.joystickInfo.flagy = 1;\r\n        }\r\n        else if (operatetype == 2) {\r\n            if ((this.joystickInfo.publicAngle >= 0 && this.joystickInfo.publicAngle <= 45)\r\n                || (this.joystickInfo.publicAngle <= 0 && this.joystickInfo.publicAngle >= -45)) this.joystickInfo.flagx = 1;\r\n        }\r\n        else if (operatetype == 3) {\r\n            if (this.joystickInfo.publicAngle <= -45 && this.joystickInfo.publicAngle >= -135) this.joystickInfo.flagy = 1;\r\n        }\r\n        else if (operatetype == 4) {\r\n            if ((this.joystickInfo.publicAngle <= -135 && this.joystickInfo.publicAngle >= -180)\r\n                || (this.joystickInfo.publicAngle <= 180 && this.joystickInfo.publicAngle >= 135)) this.joystickInfo.flagx = 1;\r\n        }\r\n    },\r\n\r\n    onCollisionExit: function () {\r\n        this.touchingNumber--;\r\n        this.joystickInfo.flagx = 1;\r\n        this.joystickInfo.flagy = 1;\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n     update (dt) {\r\n        if(this.right)\r\n        {\r\n           this.node.x += this.speed*dt;\r\n        }\r\n        else if(this.left)\r\n        {\r\n           this.node.x-=this.speed*dt;\r\n        }\r\n       if(this.up)\r\n       {\r\n           this.node.y+=this.speed*dt;\r\n       }\r\n       else if(this.down)\r\n       {\r\n           this.node.y-=this.speed*dt\r\n       }\r\n     },\r\n\r\n     onKeyDown(event)\r\n     {\r\n        switch(event.keyCode) \r\n        {      \r\n                case cc.macro.KEY.a:\r\n                this.right = true;\r\n                break;\r\n \r\n                case cc.macro.KEY.d:\r\n                this.left = true;\r\n                break;\r\n \r\n                case cc.macro.KEY.s:\r\n                this.up = true;\r\n                break;\r\n \r\n                case cc.macro.KEY.w:\r\n                this.down = true;\r\n                break;\r\n         }\r\n     },\r\n \r\n     onKeyUp(event)\r\n     {\r\n        switch(event.keyCode)\r\n        {\r\n            case cc.macro.KEY.a:\r\n            this.right = false;\r\n            break;\r\n \r\n            case cc.macro.KEY.d:\r\n            this.left = false;\r\n            break;\r\n \r\n            case cc.macro.KEY.s:\r\n            this.up = false;\r\n            break;\r\n \r\n            case cc.macro.KEY.w:\r\n            this.down = false;\r\n            break;\r\n        }\r\n     }\r\n});\r\n"]}