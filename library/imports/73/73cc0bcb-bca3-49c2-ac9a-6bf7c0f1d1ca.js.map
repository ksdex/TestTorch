{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\animationNotFirst.js"],"names":["JoystickInfo1","require","JoystickInfo2","cc","Class","extends","Component","properties","joystickInfo1","default","type","displayName","joystickInfo2","_keyflag","walkingAudio","url","AudioClip","_timeStart","_timeLimit","_havePlayed","_tempAngle1","_tempAngle2","ifDead","onLoad","Date","valueOf","update","dt","myAnimation","getComponent","Animation","play","playAdditive","audioEngine","_ifMove","publicAngle","log"],"mappings":"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","file":"animationNotFirst.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\nvar JoystickInfo1 = require('JoystickBG1');\nvar JoystickInfo2 = require('JoystickBG2');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        joystickInfo1: {\n\n            default: null,\n            type: JoystickInfo1,\n            displayName: '移动信息来源',\n        },\n        joystickInfo2: {\n\n            default: null,\n            type: JoystickInfo2,\n            displayName: '方向信息来源',\n        },\n        _keyflag: 0,\n        walkingAudio:\n        {\n            default:null,\n            url:cc.AudioClip,\n        },\n        // finalLight:{\n        //     default:null,\n        //     type:cc.Node,\n        //     displayName:'灯光',\n        // },\n        // blackShade:{\n        //     default:null,\n        //     type:cc.Node,\n        //     displayName:'黑幕',\n        // },\n        _timeStart: 0,\n        _timeLimit: 0,\n        _havePlayed: 0,\n        _tempAngle1: 1,\n        _tempAngle2: 1,\n        ifDead: 0,\n    },\n\n\n    onLoad: function () {\n        // this._tempAngle1 = this.joystickInfo.publicAngle;\n        // this._tempAngle2 = this.joystickInfo.publicAngle;\n        // if (this._tempAngle1 <= -45 && this._tempAngle1 >= -135) {\n        //     this._tempAngle1 = 1;\n        // }\n        // else {\n        //     this._tempAngle1 = 0;\n        // }\n        this._tempAngle1 = 1;\n        this._tempAngle2 = this._tempAngle1;\n\n        this._timeStart = (new Date()).valueOf();\n        this._timeLimit = this._timeStart + 2100;\n        this._havePlayed = 0;\n        // this.blackShade.opacity = 0;\n        // this.finalLight.opacity = 0;\n        this.ifDead = 0;\n    },\n\n    update: function (dt) {\n        var myAnimation = this.getComponent(cc.Animation);\n        this._timeStart = (new Date()).valueOf();\n\n        if ((this._timeStart < this._timeLimit) && this._havePlayed == 0) {\n            myAnimation.play('TestBack');\n            myAnimation.playAdditive('FirstIn');\n            cc.audioEngine.play(this.walkingAudio,false);\n            this._havePlayed = 1;\n     \n        }\n        else if(this._timeStart > this._timeLimit && this.ifDead == 0)\n         {\n           \n            if (this.joystickInfo1._ifMove == 0) {\n\n                if (this.joystickInfo2.publicAngle <= -45 && this.joystickInfo2.publicAngle >= -135) {\n                    this._tempAngle1 = 1;//back\n                }\n                else if (\n                    (this.joystickInfo2.publicAngle <= -135 && this.joystickInfo2.publicAngle >= -180)\n                    || (this.joystickInfo2.publicAngle <= 180 && this.joystickInfo2.publicAngle >= 135)\n                ) {\n                    this._tempAngle1 = 2;//right\n                }\n                else if (this.joystickInfo2.publicAngle <= 135 && this.joystickInfo2.publicAngle >= 45) {\n                    this._tempAngle1 = 3;//front\n                }\n                else if (\n                    (this.joystickInfo2.publicAngle >= 0 && this.joystickInfo2.publicAngle <= 45)\n                    || (this.joystickInfo2.publicAngle <= 0 && this.joystickInfo2.publicAngle >= -45)\n                ) {\n                    this._tempAngle1 = 4;//left\n                }\n\n                switch (this._tempAngle1) {\n                    case 1:\n                        myAnimation.play('TestBack');\n                        cc.log(\"turnBackOK\");\n                        break;\n                    case 2:\n                        myAnimation.play('TestRight');\n                        cc.log(\"turnRightOK\");\n                        break;\n                    case 3:\n                        myAnimation.play('TestFront');\n                        cc.log(\"turnFrontOK\");\n                        break;\n                    case 4:\n                        myAnimation.play('TestLeft');\n                        cc.log(\"turnLeftOK\");\n                        break;\n                    default:\n                        break;\n                }\n                \n            }\n            else if (this.joystickInfo1._ifMove == 1) {\n\n                if (this.joystickInfo2.publicAngle <= -45 && this.joystickInfo2.publicAngle >= -135) {\n                    this._tempAngle1 = 1;//back\n                }\n                else if (\n                    (this.joystickInfo2.publicAngle <= -135 && this.joystickInfo2.publicAngle >= -180)\n                    || (this.joystickInfo2.publicAngle <= 180 && this.joystickInfo2.publicAngle >= 135)\n                ) {\n                    this._tempAngle1 = 2;//right\n                }\n                else if (this.joystickInfo2.publicAngle <= 135 && this.joystickInfo2.publicAngle >= 45) {\n                    this._tempAngle1 = 3;//front\n                }\n                else if (\n                    (this.joystickInfo2.publicAngle >= 0 && this.joystickInfo2.publicAngle <= 45)\n                    || (this.joystickInfo2.publicAngle <= 0 && this.joystickInfo2.publicAngle >= -45)\n                ) {\n                    this._tempAngle1 = 4;//left\n                }\n\n\n                if (this._tempAngle1 === this._tempAngle2) {\n\n                    // console.log('No turn and ok');//use to debug\n                }\n                else {\n                    switch (this._tempAngle1) {\n                        case 1:\n                            myAnimation.play('TestBack');\n                            this._tempAngle2 = this._tempAngle1;\n                            //console.log(\"turnBackOK\");\n                            break;\n                        case 2:\n                            myAnimation.play('TestRight');\n                            this._tempAngle2 = this._tempAngle1;\n                            // console.log(\"turnRightOK\");\n                            break;\n                        case 3:\n                            myAnimation.play('TestFront');\n                            this._tempAngle2 = this._tempAngle1;\n                            // console.log(\"turnFrontOK\");\n                            break;\n                        case 4:\n                            myAnimation.play('TestLeft');\n                            this._tempAngle2 = this._tempAngle1;\n                            // console.log(\"turnLeftOK\");\n                            break;\n                        default:\n                            break;\n                    }\n\n                }\n\n            }\n        }\n        else{\n            cc.log('dfgdsdf');\n        }\n\n\n    }\n\n\n\n});\n"]}