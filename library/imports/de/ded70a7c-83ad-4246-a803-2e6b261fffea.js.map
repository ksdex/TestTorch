{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\Ghost.js"],"names":["JoystickBG","require","Character2","time1","Date","valueOf","time2","tempAngle1","tempAngle2","characterWorldPos","ghostWorldPos","angleAboutGhostAndCharacter","distanceBetweenGhostAndCharacter","cc","Class","extends","Component","properties","_faceAngle","default","displayName","characterToCal","type","Node","ghostFindYou","url","AudioClip","dieAudio","_ifAudioPlayed","speedGhost","speedUpGhost","ifGhostMove","_ifDead","_chaseModeOff","onLoad","director","getCollisionManager","enabled","enabledDebugDraw","enabledDrawBoundingBox","touchingNumber","myAnimation","getComponent","Animation","play","Math","random","onCollisionEnter","other","onCollisionStay","console","log","onCollisionExit","node","color","Color","WHITE","start","_allDirectionsMove","x","cos","PI","y","sin","_allDirectionsChasing","update","dt","characterTwoScript","characterAnimation","convertToWorldSpaceAR","getPosition","atan2","sqrt","ifDead","audioEngine","setTimeout","loadScene"],"mappings":"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","file":"Ghost.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar JoystickBG = require('JoystickBG1');\r\n\r\nvar Character2 = require('animationNotFirst');\r\nvar time1 = (new Date()).valueOf();\r\nvar time2 = time1;\r\nvar tempAngle1;\r\nvar tempAngle2;\r\n\r\n//about the ghost node\r\n\r\n\r\n\r\n\r\nvar characterWorldPos;\r\nvar ghostWorldPos;\r\nvar angleAboutGhostAndCharacter;\r\nvar distanceBetweenGhostAndCharacter;\r\n\r\n//about running after\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _faceAngle: {\r\n            default: null,\r\n            displayName: '当前面朝方向角度',\r\n        },\r\n    \r\n        // scriptOfJoystickOne: {\r\n        //     default: null,\r\n        //     type: JoystickBG,\r\n        //     displayName: '摇杆1维持相对位置',\r\n        // },\r\n        //当幽灵挂载在背景下时不需要这个节点\r\n        characterToCal: {\r\n            default: null,\r\n            type: cc.Node,\r\n            displayName: '主角',//use to calculate the distance\r\n\r\n        },\r\n        ghostFindYou:\r\n        {\r\n            default:null,\r\n            url:cc.AudioClip,\r\n        },\r\n        dieAudio:\r\n        {\r\n            default:null,\r\n            url:cc.AudioClip,\r\n        },\r\n        _ifAudioPlayed: 0,\r\n\r\n        speedGhost: 1,          //速度\r\n        speedUpGhost: 4,\r\n        ifGhostMove: 1,\r\n        _ifDead: 0,\r\n        _chaseModeOff: 1,\r\n    },\r\n\r\n\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n        this.ifGhostMove = 1;\r\n        this._ifDead = 0;\r\n\r\n        cc.director.getCollisionManager().enabled = true;\r\n        cc.director.getCollisionManager().enabledDebugDraw = false;\r\n        cc.director.getCollisionManager().enabledDrawBoundingBox = false;\r\n        this.touchingNumber = 0;\r\n\r\n        var myAnimation = this.getComponent(cc.Animation);\r\n        myAnimation.play('GhostFront');\r\n        time1 = (new Date()).valueOf();\r\n        time2 = time1;\r\n        this._faceAngle = (Math.random() * 360) - 180;\r\n        tempAngle1 = this._faceAngle;\r\n        tempAngle2 = this._faceAngle;\r\n        if (tempAngle1 <= -45 && tempAngle1 >= -135) {\r\n            tempAngle1 = 1;\r\n        }\r\n        else {\r\n            tempAngle1 = 0;\r\n        }\r\n        tempAngle2 = tempAngle1;\r\n    },\r\n\r\n    onCollisionEnter: function (other) {\r\n        this.touchingNumber++;\r\n\r\n        var myAnimation = this.getComponent(cc.Animation);\r\n        this.ifGhostMove = 0;\r\n        time2 = time1;\r\n        myAnimation.play('Dizzyghostfront');\r\n\r\n    },\r\n\r\n    onCollisionStay: function (other) {\r\n        console.log('on collision stay');\r\n    },\r\n\r\n    onCollisionExit: function () {\r\n        this.touchingNumber--;\r\n\r\n        if (this.touchingNumber === 0) {\r\n            this.node.color = cc.Color.WHITE;\r\n        }\r\n        var myAnimation = this.getComponent(cc.Animation);\r\n        myAnimation.play('GhostFront');\r\n        this.ifGhostMove = 1;\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n    //全方向移动\r\n    _allDirectionsMove: function () {\r\n        if (this.ifGhostMove) {\r\n            this.node.x -= Math.cos(this._faceAngle * (Math.PI / 180)) * this.speedGhost;\r\n            this.node.y -= Math.sin(this._faceAngle * (Math.PI / 180)) * this.speedGhost;\r\n        }\r\n    },\r\n\r\n    _allDirectionsChasing: function () {\r\n        if (this.ifGhostMove) {\r\n            this.node.x -= Math.cos(this._faceAngle * (Math.PI / 180)) * this.speedUpGhost;\r\n            this.node.y -= Math.sin(this._faceAngle * (Math.PI / 180)) * this.speedUpGhost;\r\n        }\r\n    },\r\n    \r\n\r\n    \r\n    update: function (dt) {\r\n\r\n        var characterTwoScript = this.characterToCal.getComponent(Character2);\r\n        var characterAnimation = this.characterToCal.getComponent(cc.Animation);\r\n          \r\n        characterWorldPos = this.characterToCal.convertToWorldSpaceAR(this.characterToCal.getPosition());\r\n        ghostWorldPos = this.node.convertToWorldSpaceAR(this.characterToCal.getPosition());\r\n        angleAboutGhostAndCharacter = Math.atan2(ghostWorldPos.y - characterWorldPos.y, ghostWorldPos.x - characterWorldPos.x) * (180 / Math.PI);\r\n        distanceBetweenGhostAndCharacter =\r\n            Math.sqrt((ghostWorldPos.x - characterWorldPos.x) * (ghostWorldPos.x - characterWorldPos.x)\r\n                + (ghostWorldPos.y - characterWorldPos.y) * (ghostWorldPos.y - characterWorldPos.y));\r\n        \r\n                if (distanceBetweenGhostAndCharacter < 40 && this._ifDead == 0) \r\n                {\r\n                    characterAnimation.play('TestDeath');\r\n\r\n                    characterTwoScript.ifDead = 1;\r\n                    this._ifDead = 1;\r\n                    cc.audioEngine.play(this.dieAudio,false);\r\n                    setTimeout(() => {\r\n                        cc.director.loadScene('GameLose');\r\n                    }, 1500); \r\n                }\r\n          \r\n                if (distanceBetweenGhostAndCharacter <= 400) {\r\n                    this._chaseModeOff = 0;\r\n                    if (this._ifAudioPlayed == 0)\r\n                    {\r\n                        cc.audioEngine.play(this.ghostFindYou,false);\r\n                        this._ifAudioPlayed = 1;\r\n                    }\r\n                    \r\n                }\r\n                else\r\n                {\r\n                    this._chaseModeOff = 1;\r\n                    this._ifAudioPlayed = 0;\r\n                }\r\n        \r\n        if (this.ifGhostMove) {\r\n            time1 = (new Date()).valueOf();\r\n\r\n            if (this._chaseModeOff)\r\n            {\r\n                if (time1 - time2 >= 1000) {\r\n                    this._faceAngle = Math.random() * 360 - 180;\r\n                    time2 = time1;\r\n                }\r\n              \r\n                this._allDirectionsMove();\r\n                //random wandering code above\r\n    \r\n                var myAnimation = this.getComponent(cc.Animation);\r\n                //animation code\r\n    \r\n                if (this._faceAngle <= -45 && this._faceAngle >= -135) {\r\n                    tempAngle1 = 1;//back\r\n                }\r\n                else if (\r\n                    (this._faceAngle <= -135 && this._faceAngle >= -180)\r\n                    || (this._faceAngle <= 180 && this._faceAngle >= 135)\r\n                ) {\r\n                    tempAngle1 = 2;//right\r\n                }\r\n                else if (this._faceAngle <= 135 && this._faceAngle >= 45) {\r\n                    tempAngle1 = 3;//front\r\n                }\r\n                else if (\r\n                    (this._faceAngle >= 0 && this._faceAngle <= 45)\r\n                    || (this._faceAngle <= 0 && this._faceAngle >= -45)\r\n                ) {\r\n                    tempAngle1 = 4;//left\r\n                }\r\n    \r\n    \r\n                if (tempAngle1 === tempAngle2) {\r\n    \r\n                    // console.log('No turn and ok');//use to debug\r\n                }\r\n                else {\r\n                    switch (tempAngle1) {\r\n                        case 1:\r\n                            myAnimation.play('GhostBack');\r\n                            tempAngle2 = tempAngle1;\r\n                            // console.log(\"ghostTurnBackOK\");\r\n                            break;\r\n                        case 2:\r\n                            myAnimation.play('GhostRight');\r\n                            tempAngle2 = tempAngle1;\r\n                            //console.log(\"ghostTurnRightOK\");\r\n                            break;\r\n                        case 3:\r\n                            myAnimation.play('GhostFront');\r\n                            tempAngle2 = tempAngle1;\r\n                            // console.log(\"GhostTurnFrontOK\");\r\n                            break;\r\n                        case 4:\r\n                            myAnimation.play('GhostLeft');\r\n                            tempAngle2 = tempAngle1;\r\n                            //  console.log(\"ghostTurnLeftOK\");\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                }\r\n            \r\n            }\r\n            else\r\n            {\r\n                //chasing code\r\n                this._faceAngle = angleAboutGhostAndCharacter;\r\n                this._allDirectionsChasing();\r\n    \r\n                var myAnimation = this.getComponent(cc.Animation);\r\n                //animation code\r\n    \r\n                if (this._faceAngle <= -45 && this._faceAngle >= -135) {\r\n                    tempAngle1 = 1;//back\r\n                }\r\n                else if (\r\n                    (this._faceAngle <= -135 && this._faceAngle >= -180)\r\n                    || (this._faceAngle <= 180 && this._faceAngle >= 135)\r\n                ) {\r\n                    tempAngle1 = 2;//right\r\n                }\r\n                else if (this._faceAngle <= 135 && this._faceAngle >= 45) {\r\n                    tempAngle1 = 3;//front\r\n                }\r\n                else if (\r\n                    (this._faceAngle >= 0 && this._faceAngle <= 45)\r\n                    || (this._faceAngle <= 0 && this._faceAngle >= -45)\r\n                ) {\r\n                    tempAngle1 = 4;//left\r\n                }\r\n    \r\n    \r\n                if (tempAngle1 === tempAngle2) {\r\n    \r\n                    // console.log('No turn and ok');//use to debug\r\n                }\r\n                else {\r\n                    switch (tempAngle1) {\r\n                        case 1:\r\n                            myAnimation.play('GhostBack');\r\n                            tempAngle2 = tempAngle1;\r\n                            // console.log(\"ghostTurnBackOK\");\r\n                            break;\r\n                        case 2:\r\n                            myAnimation.play('GhostRight');\r\n                            tempAngle2 = tempAngle1;\r\n                            //console.log(\"ghostTurnRightOK\");\r\n                            break;\r\n                        case 3:\r\n                            myAnimation.play('GhostFront');\r\n                            tempAngle2 = tempAngle1;\r\n                            // console.log(\"GhostTurnFrontOK\");\r\n                            break;\r\n                        case 4:\r\n                            myAnimation.play('GhostLeft');\r\n                            tempAngle2 = tempAngle1;\r\n                            //  console.log(\"ghostTurnLeftOK\");\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                }\r\n            \r\n            }\r\n        }\r\n        else {\r\n            ;\r\n        }\r\n\r\n    },\r\n});\r\n"]}